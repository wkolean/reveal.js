<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Virtual Machine Presentation</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="reveal.js/css/reveal.css">
		<link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="reveal.js/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h2>Virtual Machines</h2>
					<p>For Web Development</p>
				</section>

				<section>
					<h2>Why?</h2>
					<ol>
						<li class="fragment">Create a dev environment that closely matches staging/production servers
							<ul>
								<li class="fragment">Same OS</li>
								<li class="fragment">Same software versions</li>
								<li class="fragment">Same Extensions</li>
								<li class="fragment">Same paths</li>
							</ul>
						</li>
						<li class="fragment">Keeps existing dev environment clean</li>
					</ol>
				</section>

				<section>
					<h2>VM Choices</h2>
					<ul>
						<li class="fragment">VM Ware <span class="fragment">$50</span></li>
						<li class="fragment">Parallels <span class="fragment">$80</span></li>
						<li class="fragment">VirtualBox <span class="fragment">Free</span></li>
					</ul>
				</section>

				<section>
					<h2>OS Choices</h2>
					<ul>
						<li class="fragment">Linux</li>
						<li class="fragment">Windows</li>
						<li class="fragment">Unix</li>
						<li class="fragment">Mac</li>
					</ul>
				</section>

				<section>
					<h2>Creating a VM</h2>
					<!--p class="fragment">Use same VM as web host</p>
					<ul>
						<li class="fragment">Amazon Machine Image (AMI)</li>
						<li class="fragment">Rackspace Snaphot</li>
					</ul-->
				</section>

				<section>
					<h2>VMWare</h2>
					<ul>
						<li class="fragment">R/GA Supported</li>
						<li class="fragment">Fusion on the Mac</li>
						<li class="fragment">Player on the PC</li>
					</ul>
				</section>

				<section>
					<section>
						<h2>What is your server running?</h2>
					</section>
					<section>
						<h2>Unix</h2>
						<pre><code>
%uname -a
FreeBSD tyllur.pair.com 7.3-RELEASE-p2 FreeBSD 7.3-RELEASE-p2 #0: Fri Nov 23 08:39:01 EST 2012     erik5@yodh.pair.com:/usr/obj/usr/src/sys/73PAIRe  i386
						</code></pre>
					</section>
					<section>
						<h2>Linux</h2>
						<pre><code>
%uname -a
Linux pwc-vm 2.6.18-308.20.1.el5 #1 SMP Tue Nov 13 10:15:12 EST 2012 x86_64 x86_64 x86_64 GNU/Linux
						</pre></code>
						<pre><code>
%cat /etc/*-release
CentOS release 5.8 (Final)
						</pre></code>
						<pre><code>
%lsb_release -a
LSB Version:	:core-4.0-amd64:core-4.0-ia32:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-ia32:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-ia32:printing-4.0-noarch
Distributor ID:	CentOS
Description:	CentOS release 5.8 (Final)
Release:	5.8
Codename:	Final
						</code></pre>
					</section>
					<section>
						<h2>Windows</h2>
						<img src ="img/vm/win_properties.png" />
					</section>
					<section>
						<h2>Windows</h2>
						<img src ="img/vm/win_info.png" />
					</section>
					<section>
						<h2>Mac</h2>
						<pre><code>
%uname -a
Darwin LT-MBP-NYC-354.local 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 i386 MacBookPro8,2 Darwin
						</pre></code>
						<pre><code>
%sw_vers -productVersion
10.8.2
						</pre></code>
						<pre><code>
%system_profiler SPSoftwareDataType
Software:

    System Software Overview:

      System Version: OS X 10.8.2 (12C60)
      Kernel Version: Darwin 12.2.0
      Boot Volume: Macintosh HD
      Boot Mode: Normal
      Computer Name: LT-MBP-NYC-354
      User Name: William Kolean (william)
      Secure Virtual Memory: Enabled
      Time since boot: 1:32
						</pre></code>
					</section>
				</section>

				<section>
					<section>
						<h2>Download ISO</h2>
					</section>
					<section>
						<h2>Linux/Unix</h2>
						<img src="img/vm/download.png" />
					</section>
					<section>
						<h2>Windows</h2>
						<ul>
							<li class="fragment">Microsoft Action Pack subscription <span class="fragment">$329</span></li>
							<li class="fragment">TechNet Subscription <span class="fragment">$199</span></li>
							<li class="fragment"><a href="http://www.mydigitallife.info/" target="_blank">mydigitallife.info</a> <span class="fragment">free</span></li>
						</ul>
					</section>
					<section>
						<h2>Mac</h2>
						<p>App Store installer</p>
						<img src="img/vm/lion_installer.png" />
					</section>
				</section>

				<section>
					<section>
						<h2>Creating a new VM</h2>
						<p>Choose the ISO</p>
						<img src="img/vm/choose_iso.png" />
					</section>
					<section>
						<h2>Creating a new VM</h2>
						<p>Easy Install</p>
						<img src="img/vm/easy_install.png" />
					</section>
					<section>
						<h2>Creating a new VM</h2>
						<p>Wait for install to finish</p>
						<img src="img/vm/installing.png" />
					</section>
					<section>
						<h2>Creating a new VM</h2>
						<p>Success!</p>
						<img src="img/vm/installed.png" />
					</section>
				</section>

				<section>
					<section>
						<h2>Snapshots</h2>
						<p>Protection in case things go wrong</p>
					</section>
					<section>
						<h2>Snapshots</h2>
						<img src="img/vm/snapshots-1.png" />
					</section>
					<section>
						<h2>Snapshots</h2>
						<img src="img/vm/snapshots-2.png" />
					</section>
					<section>
						<h2>Snapshots</h2>
						<img src="img/vm/snapshots-3.png" />
					</section>
				</section>

				<section>
					<section>
						<h2>VM Networking Setup</h2>
						<p>Log in as root</p>
					</section>
					<section>
						<h2>Get MAC address</h2>
					</section>
					<section>
						<h2>Open Terminal</h2>
						<img src="img/vm/terminal.png" />
					</section>
					<section>
						<h2>ifconfig</h2>
						<img src="img/vm/ifconfig.png" />
					</section>
					<section>
						<h2>Hostname</h2>
						<img src="img/vm/vm-networking-1.png" />
					</section>
					<section>
						<h2>Hostname</h2>
						<img src="img/vm/vm-networking-2.png" />
					</section>
					<section>
						<h2>Hostname</h2>
						<img src="img/vm/vm-networking-3.png" />
					</section>
					<section>
						<h2>Firewall</h2>
						<img src="img/vm/firewall-1.png" />
					</section>
					<section>
						<h2>Firewall</h2>
						<img src="img/vm/firewall-2.png" />
					</section>
					<section>
						<h2>Firewall</h2>
						<img src="img/vm/firewall-3.png" />
					</section>
					<section>
						<h2>Samba</h2>
						<pre><code>
%yum install samba
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
 * base: centos.vipernetworksystems.com
 * extras: mirrors.advancedhosters.com
 * updates: mirror.cogentco.com
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package samba.x86_64 0:3.5.10-125.el6 will be installed
--> Processing Dependency: samba-common = 3.5.10-125.el6 for package: samba-3.5.10-125.el6.x86_64
--> Running transaction check
---> Package samba-common.x86_64 0:3.5.10-125.el6 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

=========================================================================================================================================================
 Package                                Arch                             Version                                    Repository                      Size
=========================================================================================================================================================
Installing:
 samba                                  x86_64                           3.5.10-125.el6                             base                           5.0 M
Installing for dependencies:
 samba-common                           x86_64                           3.5.10-125.el6                             base                            13 M

Transaction Summary
=========================================================================================================================================================
Install       2 Package(s)

Total download size: 18 M
Installed size: 64 M
Is this ok [y/N]: y
Downloading Packages:
(1/2): samba-3.5.10-125.el6.x86_64.rpm                                                                                            | 5.0 MB     00:06     
(2/2): samba-common-3.5.10-125.el6.x86_64.rpm                                                                                     |  13 MB     00:22     
---------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                    643 kB/s |  18 MB     00:29     
warning: rpmts_HdrFromFdno: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
Importing GPG key 0xC105B9DE:
 Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>
 Package: centos-release-6-3.el6.centos.9.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
 From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
Is this ok [y/N]: y
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : samba-common-3.5.10-125.el6.x86_64                                                                                                    1/2 
  Installing : samba-3.5.10-125.el6.x86_64                                                                                                           2/2 
  Verifying  : samba-3.5.10-125.el6.x86_64                                                                                                           1/2 
  Verifying  : samba-common-3.5.10-125.el6.x86_64                                                                                                    2/2 

Installed:
  samba.x86_64 0:3.5.10-125.el6                                                                                                                          

Dependency Installed:
  samba-common.x86_64 0:3.5.10-125.el6                                                                                                                   

Complete!
						</pre></code>
					</section>
					<section>
						<h2>Samba</h2>
						<pre><code>
%vi /etc/samba/smb.conf
						</pre></code>
						<pre><code>
# ----------------------- Standalone Server Options ------------------------
        security = share
						</pre></code>
						<pre><code>
# --------------------------- Filesystem Options ---------------------------
        guest ok = yes
        guest account = root
						</pre></code>
						<pre><code>
[PwC6-VM]
        path = /var/www/html
        writeable = yes
        guest ok = yes
        public = yes
        create mask = 0644
						</pre></code>
						<pre><code>
%/etc/rc.d/init.d/smb start 
%/etc/rc.d/init.d/nmb start 
%chkconfig smb on
%chkconfig nmb on
						</pre></code>
						<!--pre><code>
%vi /etc/selinux/config
SELINUX=disabled
						</pre></code-->
					</section>
				</section>

				<section>
					<section>
						<h2>VMWare Networking Setup</h2>
					</section>
					<section>
						<h2>Networking Types</h2>
						<ol>
							<li class="fragment">Host Only <span class="fragment">= No access to network</span></li>
							<li class="fragment">Bridged <span class="fragment">= Another computer on the network</span></li>
							<li class="fragment">NAT <span class="fragment">= Shares host computer's network</span></li>
						</ol>
					</section>
					<section>
						<h2>Static IP</h2>
						<ol>
							<li class="fragment">Shutdown VM</li>
							<li class="fragment">Shutdown VMWare</li>
							<li class="fragment">
								Edit dhcp.conf
								<ul>
									<li>/Library/Preferences/VMWare Fusion/vmnet8/dhcpd.conf</li>
									<li>C:\ProgramData\VMware\vmnetdhcp.conf</li>
								</ul>
							</li>
						</ol>
					</section>
					<section>
						<h2>dhcp.conf</h2>
						<pre><code>
subnet 192.168.104.0 netmask 255.255.255.0 {
	range 192.168.104.128 192.168.104.254;
	option broadcast-address 192.168.104.255;
	option domain-name-servers 192.168.104.2;
	option domain-name localdomain;
	default-lease-time 1800;                # default is 30 minutes
	max-lease-time 7200;                    # default is 2 hours
	option netbios-name-servers 192.168.104.2;
	option routers 192.168.104.2;
}
host vmnet8 {
	hardware ethernet 00:50:56:C0:00:08;
	fixed-address 192.168.104.1;
	option domain-name-servers 0.0.0.0;
	option domain-name "";
	option routers 0.0.0.0;
}
####### VMNET DHCP Configuration. End of "DO NOT MODIFY SECTION" #######
						</pre></code>
					</section>
					<section>
						<h2>dhcp.conf</h2>
						<pre><code>
host pwc-vm6 {
	hardware ethernet 00:0C:29:7C:9A:2F;
	fixed-address 192.168.104.101;
}
						</pre></code>
					</section>
					<section>
						<h2>Restart VM</h2>
						<img src="img/vm/dhcp-success.png" />
					</section>
					<section>
						<h2>Create domain name</h2>
						<ul class="fragment">
							<li>/etc/hosts</li>
							<li>/etc/hosts.ac</li>
							<li>c:\windows\system32\drivers\etc\hosts</li>
						</ul>
						<pre class="fragment"><code>
sudo vi /etc/hosts
						</pre></code>
						<pre class="fragment"><code>
192.168.104.101	drupal.pwc6.dev
						</pre></code>
					</section>
				</section>

				<section>
					<section>
						<h2>Connect using Terminal</h2>
						<img src="img/vm/ssh.png" />
					</section>
					<section>
						<h2>Connect using web browser</h2>
						<p>http://192.168.104.101/</p>
						<img src="img/vm/browser.png" />
					</section>
					<section>
						<h2>Connect using Samba</h2>
						<img src="img/vm/samba-connect.png" />
					</section>

				</section>

				<section>
					<section>
						<h2>Install Software</h2>
						<pre><code>
%yum list installed | grep php
php.x86_64              5.3.3-14.el6_3  @updates                                
php-cli.x86_64          5.3.3-14.el6_3  @updates                                
php-common.x86_64       5.3.3-14.el6_3  @updates                                
php-devel.x86_64        5.3.3-14.el6_3  @updates                                
php-gd.x86_64           5.3.3-14.el6_3  @updates  
						</pre></code>
					</section>
					<section>
						<pre><code>
%yum list | grep php
ups-php.x86_64                         1:1.4.2-48.el6_3.3               updates
graphviz-php.x86_64                     2.26.0-7.el6                     base   
php.x86_64                              5.3.3-14.el6_3                   updates
php-bcmath.x86_64                       5.3.3-14.el6_3                   updates
php-cli.x86_64                          5.3.3-14.el6_3                   updates
php-common.x86_64                       5.3.3-14.el6_3                   updates
php-dba.x86_64                          5.3.3-14.el6_3                   updates
php-devel.x86_64                        5.3.3-14.el6_3                   updates
php-embedded.x86_64                     5.3.3-14.el6_3                   updates
php-enchant.x86_64                      5.3.3-14.el6_3                   updates
php-gd.x86_64                           5.3.3-14.el6_3                   updates
php-imap.x86_64                         5.3.3-14.el6_3                   updates
php-intl.x86_64                         5.3.3-14.el6_3                   updates
php-ldap.x86_64                         5.3.3-14.el6_3                   updates
php-mbstring.x86_64                     5.3.3-14.el6_3                   updates
php-mysql.x86_64                        5.3.3-14.el6_3                   updates
php-odbc.x86_64                         5.3.3-14.el6_3                   updates
php-pdo.x86_64                          5.3.3-14.el6_3                   updates
php-pear.noarch                         1:1.9.4-4.el6                    base   
php-pecl-apc.x86_64                     3.1.9-2.el6                      base   
php-pecl-apc-devel.x86_64               3.1.9-2.el6                      base   
php-pecl-memcache.x86_64                3.0.5-4.el6                      base   
php-pgsql.x86_64                        5.3.3-14.el6_3                   updates
php-process.x86_64                      5.3.3-14.el6_3                   updates
php-pspell.x86_64                       5.3.3-14.el6_3                   updates
php-recode.x86_64                       5.3.3-14.el6_3                   updates
php-snmp.x86_64                         5.3.3-14.el6_3                   updates
php-soap.x86_64                         5.3.3-14.el6_3                   updates
php-tidy.x86_64                         5.3.3-14.el6_3                   updates
php-xml.x86_64                          5.3.3-14.el6_3                   updates
php-xmlrpc.x86_64                       5.3.3-14.el6_3                   updates
php-zts.x86_64                          5.3.3-14.el6_3                   updates
rrdtool-php.x86_64                      1.3.8-6.el6                      base   
uuid-php.x86_64                         1.6.1-10.el6                     base   
						</pre></code>
					</section>
					<section>
						<pre><code>
%yum install php php-common php-devel php-gd
Complete!
[root@localhost ~]# yum list installed | grep php
php.x86_64              5.3.3-14.el6_3  @updates                                
php-cli.x86_64          5.3.3-14.el6_3  @updates                                
php-common.x86_64       5.3.3-14.el6_3  @updates                                
php-devel.x86_64        5.3.3-14.el6_3  @updates                                
php-gd.x86_64           5.3.3-14.el6_3  @updates                                
						</pre></code>
					</section>
				</section>

				<section>
					<section>
						<h2>Apache Virtual Server</h2>
						<ul class="fragment">
							<li>/etc/httpd/conf.d</li>
							<li>/etc/apache2/extra</li>
						</ul>
					</section>
					<section>
						<h2>Create Virtual Server</h2>
						<pre><code>
%cd /etc/httpd/conf.d
%vi pwc.conf
						</pre></code>
						<pre><code>
&lt;VirtualHost *:80&gt;
        ServerName drupal.pwc6.dev
        DocumentRoot /var/www/html/PwC/drupal
        &lt;Directory "/var/www/html/PwC/drupal"&gt;
                Order allow,deny
                Allow from all
                AllowOverride All
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
						</pre></code>
						<pre><code>
%apachectl restart
						</pre></code>
					</section>
					<section>
						<h2>Domain Name should be working</h2>
						<p>http://drupal.pwc6.dev/</p>
						<img src="img/vm/domain-name.png" />
					</section>
				</section>

				<section>
					<section>
						<h2>Tips and Tricks</h2>
					</section>
					<section>
						<h2>Start VM automatically</h2>
						<img src="img/vm/autostart.png" />
					</section>
					<section>
						<h2>Alias Samba Share</h2>
						<img src="img/vm/alias.png" />
					</section>
					<section>
						<h2>Terminal aliases</h2>
						<pre><code>
%vi ~/.bashrc
						</pre></code>
						<pre><code>
alias cdwww='cd /var/www/html'
alias cdpwc='cd /var/www/html/PwC'
alias cddrupal='cd /var/www/html/PwC/drupal'
alias cdbuild='cd /var/www/html/PwC/build'
						</pre></code>
					</section>
					<section>
						<h2>VM Restart</h2>
						<p>If response time becomes really slow, restart the VM</p>
					</section>
				</section>

				<section>
					<section>
						<h2>Disadvantages</h2>
					</section>
					<section>
						<h2>KeyServer</h2>
						<img src="img/vm/keyserver.png" />
					</section>
					<section>
						<h2>VPN</h2>
						<p>Cannot connect to VM when connected to VPN</p>
					</section>
					<section>
						<h2>Apple Double Files</h2>
						<img src="img/vm/apple-double.png" />
					</section>
					<section>
						<h2>CPU usage</h2>
						<img src="img/vm/activity-monitor.png" />
					</section>
				</section>

				<section>
					<h2>Helpful Terminal Programs</h2>
					<ul>
						<li>ssh</li>
						<li>vi</li>
						<li>chown</li>
						<li>scp</li>
						<li>tar</li>
						<li>rsync</li>
					</ul>
				</section>

				<section>
					<h2>Thank You</h2>
					<ul>
						<li>reveal.js <a href="http://lab.hakim.se/reveal-js/" target="_blank">http://lab.hakim.se/reveal-js/</a></li>
						<li><a href="https://github.com/wkolean/reveal.js/tree/vm" target="_blank">https://github.com/wkolean/reveal.js/tree/vm</a></li>
					</ul>
				</section>

			</div>

		</div>

		<script src="reveal.js/lib/js/head.min.js"></script>
		<script src="reveal.js/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
					{ src: 'reveal.js/plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
